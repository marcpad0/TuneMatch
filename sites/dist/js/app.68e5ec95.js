(function(){"use strict";var e={6219:function(e,t,s){var i=s(5130),o=s(6768);const r={class:"nav-links"},a={class:"content"};function n(e,t){const s=(0,o.g2)("router-link"),i=(0,o.g2)("router-view");return(0,o.uX)(),(0,o.CE)(o.FK,null,[(0,o.Lk)("nav",null,[(0,o.Lk)("ul",r,[(0,o.Lk)("li",null,[(0,o.bF)(s,{to:"/register"},{default:(0,o.k6)((()=>t[0]||(t[0]=[(0,o.eW)("Register")]))),_:1})]),(0,o.Lk)("li",null,[(0,o.bF)(s,{to:"/"},{default:(0,o.k6)((()=>t[1]||(t[1]=[(0,o.eW)("Login")]))),_:1})])])]),(0,o.Lk)("main",a,[(0,o.bF)(i)])],64)}var l=s(1241);const d={},u=(0,l.A)(d,[["render",n]]);var c=u,p=s(1387);const m={class:"login-container"},k={class:"login-card"},f={class:"input-group"},h={class:"input-group"},b={class:"input-group"},g={class:"input-group"},L={class:"input-group"},v={class:"register-link"};function U(e,t,s,r,a,n){const l=(0,o.g2)("router-link");return(0,o.uX)(),(0,o.CE)("div",m,[(0,o.Lk)("div",k,[t[14]||(t[14]=(0,o.Lk)("h2",{class:"title"},"Registrati",-1)),(0,o.Lk)("form",{onSubmit:t[5]||(t[5]=(0,i.D$)(((...e)=>n.registerUser&&n.registerUser(...e)),["prevent"]))},[(0,o.Lk)("div",f,[t[6]||(t[6]=(0,o.Lk)("label",{for:"username"},"Username",-1)),(0,o.bo)((0,o.Lk)("input",{id:"username","onUpdate:modelValue":t[0]||(t[0]=e=>a.username=e),type:"text",placeholder:"Inserisci il tuo username",required:""},null,512),[[i.Jo,a.username]])]),(0,o.Lk)("div",h,[t[7]||(t[7]=(0,o.Lk)("label",{for:"emailSpotify"},"Email Spotify",-1)),(0,o.bo)((0,o.Lk)("input",{id:"emailSpotify","onUpdate:modelValue":t[1]||(t[1]=e=>a.emailSpotify=e),type:"email",placeholder:"Inserisci la tua email di Spotify",required:""},null,512),[[i.Jo,a.emailSpotify]])]),(0,o.Lk)("div",b,[t[8]||(t[8]=(0,o.Lk)("label",{for:"position"},"Posizione",-1)),(0,o.bo)((0,o.Lk)("input",{id:"position","onUpdate:modelValue":t[2]||(t[2]=e=>a.position=e),type:"text",placeholder:"Inserisci la tua posizione",required:""},null,512),[[i.Jo,a.position]])]),(0,o.Lk)("div",g,[t[9]||(t[9]=(0,o.Lk)("label",{for:"dateBorn"},"Data di Nascita",-1)),(0,o.bo)((0,o.Lk)("input",{id:"dateBorn","onUpdate:modelValue":t[3]||(t[3]=e=>a.dateBorn=e),type:"date",required:""},null,512),[[i.Jo,a.dateBorn]])]),(0,o.Lk)("div",L,[t[10]||(t[10]=(0,o.Lk)("label",{for:"password"},"Password",-1)),(0,o.bo)((0,o.Lk)("input",{id:"password","onUpdate:modelValue":t[4]||(t[4]=e=>a.password=e),type:"password",placeholder:"Inserisci la tua password",required:""},null,512),[[i.Jo,a.password]])]),t[11]||(t[11]=(0,o.Lk)("button",{type:"submit",class:"login-button"},"Registrati",-1))],32),(0,o.Lk)("p",v,[t[13]||(t[13]=(0,o.eW)(" Hai già un account? ")),(0,o.bF)(l,{to:"/login"},{default:(0,o.k6)((()=>t[12]||(t[12]=[(0,o.eW)("Accedi")]))),_:1})])])])}s(4114);var y=s(4373),I={name:"tofo-item",data(){return{username:"",emailSpotify:"",position:"",password:"",dateBorn:""}},methods:{async registerUser(){try{const e=await y.A.post("http://37.27.206.153:3000/users",{Username:this.username,emailSpotify:this.emailSpotify,Position:this.position,Password:this.password,DateBorn:this.dateBorn});alert(`Utente registrato con successo con ID: ${e.data.message}`),this.$router.push("/")}catch(e){console.error("Errore durante la registrazione:",e),e.response&&409===e.response.status?alert("Registrazione fallita: Nome utente già in uso."):e.response&&e.response.data&&e.response.data.message?alert(`Registrazione fallita: ${e.response.data.message}`):alert("Registrazione fallita. Riprova più tardi.")}}}};const w=(0,l.A)(I,[["render",U],["__scopeId","data-v-556d4d86"]]);var A=w;const S={class:"login-container"},E={class:"login-card"},C={class:"input-group"},P={class:"input-group"},D={class:"register-link"};function B(e,t,s,r,a,n){const l=(0,o.g2)("router-link");return(0,o.uX)(),(0,o.CE)("div",S,[(0,o.Lk)("div",E,[t[8]||(t[8]=(0,o.Lk)("h2",{class:"title"},"Accedi",-1)),(0,o.Lk)("form",{onSubmit:t[2]||(t[2]=(0,i.D$)(((...e)=>n.loginUser&&n.loginUser(...e)),["prevent"]))},[(0,o.Lk)("div",C,[t[3]||(t[3]=(0,o.Lk)("label",{for:"username"},"Username",-1)),(0,o.bo)((0,o.Lk)("input",{id:"username","onUpdate:modelValue":t[0]||(t[0]=e=>a.username=e),type:"text",placeholder:"Inserisci il tuo username",required:""},null,512),[[i.Jo,a.username]])]),(0,o.Lk)("div",P,[t[4]||(t[4]=(0,o.Lk)("label",{for:"password"},"Password",-1)),(0,o.bo)((0,o.Lk)("input",{id:"password","onUpdate:modelValue":t[1]||(t[1]=e=>a.password=e),type:"password",placeholder:"Inserisci la tua password",required:""},null,512),[[i.Jo,a.password]])]),t[5]||(t[5]=(0,o.Lk)("button",{type:"submit",class:"login-button"},"Login",-1))],32),(0,o.Lk)("p",D,[t[7]||(t[7]=(0,o.eW)(" Non hai un account? ")),(0,o.bF)(l,{to:"/register"},{default:(0,o.k6)((()=>t[6]||(t[6]=[(0,o.eW)("Registrati")]))),_:1})])])])}var _={name:"todo-item",data(){return{username:"",password:""}},methods:{async loginUser(){try{const e=await y.A.post("http://37.27.206.153:3000/login",{Username:this.username,Password:this.password});localStorage.setItem("isAdmin",e.data.isAdmin),localStorage.setItem("userId",e.data.userId),this.$router.push("/users")}catch(e){console.error(e),e.response&&e.response.data&&e.response.data.message?alert(`Login fallito: ${e.response.data.message}`):alert(`Login fallito: ${e.message}`)}}}};const X=(0,l.A)(_,[["render",B],["__scopeId","data-v-08807a0c"]]);var $=X,F=s(4232);const M={class:"userlist-container"},V={class:"userlist-card"},J={class:"header-section"},O={class:"filters"},q={class:"filters-grid"},z={class:"input-group"},Q={class:"input-group"},W={class:"filter-buttons"},x={class:"user-cards-mobile"},N={class:"user-card-header"},R={class:"user-actions"},j=["onClick"],T=["onClick"],K={class:"user-card-content"},H={key:0},Y={class:"table-responsive desktop-only"},G={class:"user-table"},Z={key:0},ee={key:1},te={key:0},se={key:1},ie=["onClick"],oe=["onClick"],re={key:0,class:"modal"},ae={class:"modal-content"},ne={class:"modal-grid"},le={class:"input-group"},de={class:"input-group"},ue={class:"input-group"},ce={class:"input-group"},pe={class:"input-group"},me={key:0,class:"input-group checkbox-group"},ke={for:"editIsAdmin"},fe=["disabled"];function he(e,t,s,r,a,n){return(0,o.uX)(),(0,o.CE)("div",M,[(0,o.Lk)("div",V,[(0,o.Lk)("div",J,[t[13]||(t[13]=(0,o.Lk)("h2",{class:"title"},"Lista Utenti",-1)),(0,o.Lk)("button",{class:"filter-button",onClick:t[0]||(t[0]=(...e)=>n.logout&&n.logout(...e))},"Logout")]),(0,o.Lk)("div",O,[t[17]||(t[17]=(0,o.Lk)("h3",{class:"subtitle"},"Filtra Utenti",-1)),(0,o.Lk)("form",{onSubmit:t[4]||(t[4]=(0,i.D$)(((...e)=>n.applyFilters&&n.applyFilters(...e)),["prevent"]))},[(0,o.Lk)("div",q,[(0,o.Lk)("div",z,[t[14]||(t[14]=(0,o.Lk)("label",{for:"position"},"Posizione:",-1)),(0,o.bo)((0,o.Lk)("input",{id:"position","onUpdate:modelValue":t[1]||(t[1]=e=>a.filters.Position=e),placeholder:"es. Bergamo",class:"cute-input"},null,512),[[i.Jo,a.filters.Position]])]),(0,o.Lk)("div",Q,[t[15]||(t[15]=(0,o.Lk)("label",{for:"dateBorn"},"Data di Nascita:",-1)),(0,o.bo)((0,o.Lk)("input",{type:"date",id:"dateBorn","onUpdate:modelValue":t[2]||(t[2]=e=>a.filters.DateBorn=e),class:"cute-input"},null,512),[[i.Jo,a.filters.DateBorn]])])]),(0,o.Lk)("div",W,[t[16]||(t[16]=(0,o.Lk)("button",{type:"submit",class:"filter-button"},"Applica Filtri",-1)),(0,o.Lk)("button",{type:"button",class:"filter-button",onClick:t[3]||(t[3]=(...e)=>n.resetFilters&&n.resetFilters(...e))}," Reset Filtri ")])],32)]),(0,o.Lk)("div",x,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(a.filteredUsers,(e=>((0,o.uX)(),(0,o.CE)("div",{key:e.id,class:"user-card"},[(0,o.Lk)("div",N,[(0,o.Lk)("strong",null,(0,F.v_)(e.Username),1),(0,o.Lk)("div",R,[n.canEdit(e)?((0,o.uX)(),(0,o.CE)("button",{key:0,class:"action-button",onClick:t=>n.editUser(e)}," Modifica ",8,j)):(0,o.Q3)("",!0),n.canDelete(e)?((0,o.uX)(),(0,o.CE)("button",{key:1,class:"action-button delete-button",onClick:t=>n.deleteUser(e.id)}," Cancella ",8,T)):(0,o.Q3)("",!0)])]),(0,o.Lk)("div",K,[a.isAdmin?((0,o.uX)(),(0,o.CE)("p",H,[t[18]||(t[18]=(0,o.Lk)("strong",null,"ID:",-1)),(0,o.eW)(" "+(0,F.v_)(e.id),1)])):(0,o.Q3)("",!0),(0,o.Lk)("p",null,[t[19]||(t[19]=(0,o.Lk)("strong",null,"Email:",-1)),(0,o.eW)(" "+(0,F.v_)(e.emailSpotify),1)]),(0,o.Lk)("p",null,[t[20]||(t[20]=(0,o.Lk)("strong",null,"Posizione:",-1)),(0,o.eW)(" "+(0,F.v_)(e.Position),1)]),(0,o.Lk)("p",null,[t[21]||(t[21]=(0,o.Lk)("strong",null,"Data di Nascita:",-1)),(0,o.eW)(" "+(0,F.v_)(e.DateBorn),1)])])])))),128))]),(0,o.Lk)("div",Y,[(0,o.Lk)("table",G,[(0,o.Lk)("thead",null,[(0,o.Lk)("tr",null,[a.isAdmin?((0,o.uX)(),(0,o.CE)("th",Z,"ID")):(0,o.Q3)("",!0),t[22]||(t[22]=(0,o.Lk)("th",null,"Username",-1)),t[23]||(t[23]=(0,o.Lk)("th",null,"Email Spotify",-1)),t[24]||(t[24]=(0,o.Lk)("th",null,"Posizione",-1)),t[25]||(t[25]=(0,o.Lk)("th",null,"Data di Nascita",-1)),a.isAdmin?((0,o.uX)(),(0,o.CE)("th",ee,"isAdmin")):(0,o.Q3)("",!0),t[26]||(t[26]=(0,o.Lk)("th",null,"Azioni",-1))])]),(0,o.Lk)("tbody",null,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(a.filteredUsers,(e=>((0,o.uX)(),(0,o.CE)("tr",{key:e.id},[a.isAdmin?((0,o.uX)(),(0,o.CE)("td",te,(0,F.v_)(e.id),1)):(0,o.Q3)("",!0),(0,o.Lk)("td",null,(0,F.v_)(e.Username),1),(0,o.Lk)("td",null,(0,F.v_)(e.emailSpotify),1),(0,o.Lk)("td",null,(0,F.v_)(e.Position),1),(0,o.Lk)("td",null,(0,F.v_)(e.DateBorn),1),a.isAdmin?((0,o.uX)(),(0,o.CE)("td",se,(0,F.v_)(e.isAdmin?"Yes":"No"),1)):(0,o.Q3)("",!0),(0,o.Lk)("td",null,[n.canEdit(e)?((0,o.uX)(),(0,o.CE)("button",{key:0,class:"action-button",onClick:t=>n.editUser(e)}," Modifica ",8,ie)):(0,o.Q3)("",!0),n.canDelete(e)?((0,o.uX)(),(0,o.CE)("button",{key:1,class:"action-button delete-button",onClick:t=>n.deleteUser(e.id)}," Cancella ",8,oe)):(0,o.Q3)("",!0)])])))),128))])])]),a.showEditModal?((0,o.uX)(),(0,o.CE)("div",re,[(0,o.Lk)("div",ae,[(0,o.Lk)("span",{class:"close",onClick:t[5]||(t[5]=(...e)=>n.closeModal&&n.closeModal(...e))},"×"),t[34]||(t[34]=(0,o.Lk)("h3",{class:"modal-title"},"Modifica Utente",-1)),(0,o.Lk)("form",{onSubmit:t[12]||(t[12]=(0,i.D$)(((...e)=>n.updateUser&&n.updateUser(...e)),["prevent"]))},[(0,o.Lk)("div",ne,[(0,o.Lk)("div",le,[t[27]||(t[27]=(0,o.Lk)("label",{for:"editUsername"},"Username:",-1)),(0,o.bo)((0,o.Lk)("input",{id:"editUsername","onUpdate:modelValue":t[6]||(t[6]=e=>a.editableUser.Username=e),required:"",class:"cute-input"},null,512),[[i.Jo,a.editableUser.Username]])]),(0,o.Lk)("div",de,[t[28]||(t[28]=(0,o.Lk)("label",{for:"editEmailSpotify"},"Email Spotify:",-1)),(0,o.bo)((0,o.Lk)("input",{id:"editEmailSpotify","onUpdate:modelValue":t[7]||(t[7]=e=>a.editableUser.emailSpotify=e),class:"cute-input"},null,512),[[i.Jo,a.editableUser.emailSpotify]])]),(0,o.Lk)("div",ue,[t[29]||(t[29]=(0,o.Lk)("label",{for:"editPosition"},"Posizione:",-1)),(0,o.bo)((0,o.Lk)("input",{id:"editPosition","onUpdate:modelValue":t[8]||(t[8]=e=>a.editableUser.Position=e),class:"cute-input"},null,512),[[i.Jo,a.editableUser.Position]])]),(0,o.Lk)("div",ce,[t[30]||(t[30]=(0,o.Lk)("label",{for:"editPassword"},"Password:",-1)),(0,o.bo)((0,o.Lk)("input",{id:"editPassword",type:"password","onUpdate:modelValue":t[9]||(t[9]=e=>a.editableUser.Password=e),required:"",class:"cute-input"},null,512),[[i.Jo,a.editableUser.Password]])]),(0,o.Lk)("div",pe,[t[31]||(t[31]=(0,o.Lk)("label",{for:"editDateBorn"},"Data di Nascita:",-1)),(0,o.bo)((0,o.Lk)("input",{id:"editDateBorn",type:"date","onUpdate:modelValue":t[10]||(t[10]=e=>a.editableUser.DateBorn=e),class:"cute-input"},null,512),[[i.Jo,a.editableUser.DateBorn]])]),a.isAdmin?((0,o.uX)(),(0,o.CE)("div",me,[(0,o.Lk)("label",ke,[(0,o.bo)((0,o.Lk)("input",{id:"editIsAdmin",type:"checkbox","onUpdate:modelValue":t[11]||(t[11]=e=>a.editableUser.isAdmin=e),disabled:!a.isAdmin},null,8,fe),[[i.lH,a.editableUser.isAdmin]]),t[32]||(t[32]=(0,o.eW)(" Is Admin "))])])):(0,o.Q3)("",!0)]),t[33]||(t[33]=(0,o.Lk)("button",{type:"submit",class:"modal-button"},"Salva Modifiche",-1))],32)])])):(0,o.Q3)("",!0)])])}var be={name:"UserList",data(){return{users:[],filteredUsers:[],isAdmin:!1,userId:null,showEditModal:!1,editableUser:{},filters:{Position:"",DateBorn:""}}},methods:{canEdit(e){return this.isAdmin||e.id===parseInt(this.userId)},canDelete(e){return this.isAdmin||e.id===parseInt(this.userId)},async fetchUsers(){try{this.isAdmin="true"===localStorage.getItem("isAdmin"),this.userId=localStorage.getItem("userId");const e=await y.A.get("http://37.27.206.153:3000/users",{headers:{isAdmin:this.isAdmin.toString(),userId:this.userId}});this.users=e.data,this.filteredUsers=this.users}catch(e){console.error("Errore nel fetching degli utenti:",e),alert("Impossibile recuperare gli utenti.")}},editUser(e){this.canEdit(e)?(this.editableUser={...e},this.showEditModal=!0):alert("Non hai i permessi per modificare questo utente.")},closeModal(){this.showEditModal=!1,this.editableUser={}},async updateUser(){try{await y.A.put(`http://37.27.206.153:3000/users/${this.editableUser.id}`,{Username:this.editableUser.Username,Surname:this.editableUser.Surname,emailSpotify:this.editableUser.emailSpotify,Position:this.editableUser.Position,Password:this.editableUser.Password,DateBorn:this.editableUser.DateBorn},{headers:{isAdmin:this.isAdmin.toString(),userId:this.userId}}),alert("Utente aggiornato con successo."),this.closeModal(),this.fetchUsers()}catch(e){console.error("Errore nell'aggiornamento dell'utente:",e),e.response&&e.response.data&&e.response.data.message?alert(`Impossibile aggiornare l'utente: ${e.response.data.message}`):alert(`Impossibile aggiornare l'utente: ${e.message}`)}},async deleteUser(e){if(confirm(`Sei sicuro di voler eliminare l'utente con ID "${e}"?`))try{await y.A.delete(`http://37.27.206.153:3000/users/${e}`,{headers:{isAdmin:this.isAdmin.toString(),userId:this.userId}}),e===parseInt(this.userId)?(alert("Il tuo account è stato eliminato. Effettua il login di nuovo."),this.logout()):(alert(`Utente con ID "${e}" eliminato con successo.`),this.fetchUsers())}catch(t){console.error("Errore nell'eliminazione dell'utente:",t),t.response&&t.response.data&&t.response.data.message?alert(`Impossibile eliminare l'utente: ${t.response.data.message}`):alert(`Impossibile eliminare l'utente: ${t.message}`)}},logout(){localStorage.removeItem("isAdmin"),localStorage.removeItem("userId"),this.$router.push("/")},applyFilters(){this.filteredUsers=this.users.filter((e=>{const t=!this.filters.Position||e.Position.toLowerCase().includes(this.filters.Position.toLowerCase()),s=!this.filters.DateBorn||e.DateBorn===this.filters.DateBorn;return t&&s}))},resetFilters(){this.filters.Position="",this.filters.DateBorn="",this.filteredUsers=this.users}},mounted(){this.fetchUsers()}};const ge=(0,l.A)(be,[["render",he],["__scopeId","data-v-c8a40a64"]]);var Le=ge;const ve=[{path:"/",name:"login",component:$},{path:"/register",name:"register",component:A},{path:"/users",name:"userlist",component:Le,meta:{requiresAuth:!0}},{path:"/:pathMatch(.*)*",redirect:"/"}],Ue=(0,p.aE)({history:(0,p.LA)("/"),routes:ve});Ue.beforeEach(((e,t,s)=>{const i=e.matched.some((e=>e.meta.requiresAuth)),o=localStorage.getItem("isAdmin"),r=localStorage.getItem("userId");i&&(null===o||null===r)?s({name:"login"}):s()}));var ye=Ue;(0,i.Ef)(c).use(ye).mount("#app")}},t={};function s(i){var o=t[i];if(void 0!==o)return o.exports;var r=t[i]={exports:{}};return e[i].call(r.exports,r,r.exports,s),r.exports}s.m=e,function(){var e=[];s.O=function(t,i,o,r){if(!i){var a=1/0;for(u=0;u<e.length;u++){i=e[u][0],o=e[u][1],r=e[u][2];for(var n=!0,l=0;l<i.length;l++)(!1&r||a>=r)&&Object.keys(s.O).every((function(e){return s.O[e](i[l])}))?i.splice(l--,1):(n=!1,r<a&&(a=r));if(n){e.splice(u--,1);var d=o();void 0!==d&&(t=d)}}return t}r=r||0;for(var u=e.length;u>0&&e[u-1][2]>r;u--)e[u]=e[u-1];e[u]=[i,o,r]}}(),function(){s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,{a:t}),t}}(),function(){s.d=function(e,t){for(var i in t)s.o(t,i)&&!s.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})}}(),function(){s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={524:0};s.O.j=function(t){return 0===e[t]};var t=function(t,i){var o,r,a=i[0],n=i[1],l=i[2],d=0;if(a.some((function(t){return 0!==e[t]}))){for(o in n)s.o(n,o)&&(s.m[o]=n[o]);if(l)var u=l(s)}for(t&&t(i);d<a.length;d++)r=a[d],s.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return s.O(u)},i=self["webpackChunksites"]=self["webpackChunksites"]||[];i.forEach(t.bind(null,0)),i.push=t.bind(null,i.push.bind(i))}();var i=s.O(void 0,[504],(function(){return s(6219)}));i=s.O(i)})();
//# sourceMappingURL=app.68e5ec95.js.map